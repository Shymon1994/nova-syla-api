<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Syla Loyalty API - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.2em;
        }

        .version-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 15px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .endpoint-group {
            margin-bottom: 30px;
        }

        .endpoint-group h3 {
            color: #764ba2;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .endpoint {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .endpoint:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .endpoint-method {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
            margin-right: 10px;
        }

        .method-get {
            background: #28a745;
            color: white;
        }

        .method-post {
            background: #007bff;
            color: white;
        }

        .method-put {
            background: #ffc107;
            color: #333;
        }

        .method-delete {
            background: #dc3545;
            color: white;
        }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            color: #333;
            font-weight: bold;
        }

        .endpoint-desc {
            color: #666;
            font-size: 0.9em;
            margin-top: 8px;
            font-style: italic;
        }

        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            margin-top: 10px;
            transition: opacity 0.3s ease;
        }

        .test-button:hover {
            opacity: 0.9;
        }

        .test-result {
            background: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.85em;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .feature {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .footer {
            text-align: center;
            color: white;
            padding: 20px;
            margin-top: 30px;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.75em;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge-auth {
            background: #dc3545;
            color: white;
        }

        .badge-public {
            background: #28a745;
            color: white;
        }

        .loading {
            text-align: center;
            color: #667eea;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Nova Syla Loyalty API</h1>
            <p>–ü–æ—Ç—É–∂–Ω–∏–π RESTful API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ</p>
            <span class="version-badge">Version 2.0.0</span>
        </div>

        <div class="stats" id="stats">
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-value" id="users-count">-</div>
                <div class="stat-label">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-value" id="bonuses-count">-</div>
                <div class="stat-label">–ë–æ–Ω—É—Å—ñ–≤ –Ω–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéÅ</div>
                <div class="stat-value" id="promos-count">-</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–æ–º–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üè™</div>
                <div class="stat-value" id="stores-count">-</div>
                <div class="stat-label">–ú–∞–≥–∞–∑–∏–Ω—ñ–≤</div>
            </div>
        </div>

        <div class="section">
            <h2>üåê –ü—É–±–ª—ñ—á–Ω–µ API (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)</h2>
            
            <div class="endpoint-group">
                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/public/info</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–≥—Ä–∞–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç—ñ</div>
                    <button class="test-button" onclick="testEndpoint('/api/v2/public/info', 'GET', 'info-result')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                    <div id="info-result" class="test-result"></div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/public/stats</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–∏</div>
                    <button class="test-button" onclick="testEndpoint('/api/v2/public/stats', 'GET', 'stats-result')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                    <div id="stats-result" class="test-result"></div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/public/stores</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–°–ø–∏—Å–æ–∫ –º–∞–≥–∞–∑–∏–Ω—ñ–≤ (–∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é)</div>
                    <button class="test-button" onclick="testEndpoint('/api/v2/public/stores?page=1&limit=5', 'GET', 'stores-result')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                    <div id="stores-result" class="test-result"></div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/public/promotions</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–ê–∫—Ç–∏–≤–Ω—ñ –ø—Ä–æ–º–æ–∞–∫—Ü—ñ—ó</div>
                    <button class="test-button" onclick="testEndpoint('/api/v2/public/promotions', 'GET', 'promos-result')">–¢–µ—Å—Ç—É–≤–∞—Ç–∏</button>
                    <div id="promos-result" class="test-result"></div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-post">POST</span>
                    <span class="endpoint-path">/api/v2/public/check-phone</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (Authentication)</h2>
            
            <div class="endpoint-group">
                <div class="endpoint">
                    <span class="endpoint-method method-post">POST</span>
                    <span class="endpoint-path">/api/v2/auth/login</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–≤–µ—Ä—Ç–∞—î JWT —Ç–æ–∫–µ–Ω)</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/auth/verify</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω—É</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-post">POST</span>
                    <span class="endpoint-path">/api/v2/auth/refresh</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–û–Ω–æ–≤–ª–µ–Ω–Ω—è JWT —Ç–æ–∫–µ–Ω—É</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üë§ –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (Client)</h2>
            
            <div class="endpoint-group">
                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/client/me</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–û—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-put">PUT</span>
                    <span class="endpoint-path">/api/v2/client/me</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/client/me/balance</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–ë–∞–ª–∞–Ω—Å –±–æ–Ω—É—Å–Ω–æ–≥–æ —Ä–∞—Ö—É–Ω–∫—É</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/client/me/transactions</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–Ü—Å—Ç–æ—Ä—ñ—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üì± QR –ö–æ–¥–∏</h2>
            
            <div class="endpoint-group">
                <div class="endpoint">
                    <span class="endpoint-method method-post">POST</span>
                    <span class="endpoint-path">/api/v2/qr/generate</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è QR –∫–æ–¥—É –¥–ª—è –æ–ø–ª–∞—Ç–∏</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-get">GET</span>
                    <span class="endpoint-path">/api/v2/qr/validate/:token</span>
                    <span class="badge badge-public">PUBLIC</span>
                    <div class="endpoint-desc">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ QR –∫–æ–¥—É</div>
                </div>

                <div class="endpoint">
                    <span class="endpoint-method method-post">POST</span>
                    <span class="endpoint-path">/api/v2/qr/use</span>
                    <span class="badge badge-auth">AUTH</span>
                    <div class="endpoint-desc">–í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ QR –∫–æ–¥ –¥–ª—è –æ–ø–ª–∞—Ç–∏</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>‚ú® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ API</h2>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üîí</div>
                    <div class="feature-title">JWT Authentication</div>
                    <div>–ë–µ–∑–ø–µ—á–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω–∏</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">‚ö°</div>
                    <div class="feature-title">Rate Limiting</div>
                    <div>–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∑–ª–æ–≤–∂–∏–≤–∞–Ω—å</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">‚úÖ</div>
                    <div class="feature-title">Validation (Zod)</div>
                    <div>–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-title">Logging</div>
                    <div>–ü–æ–≤–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <div class="feature-title">Security</div>
                    <div>Helmet + CORS –∑–∞—Ö–∏—Å—Ç</div>
                </div>
                <div class="feature">
                    <div class="feature-icon">üîÑ</div>
                    <div class="feature-title">Versioning</div>
                    <div>API v1 —Ç–∞ v2</div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>¬© 2025 Nova Syla Loyalty. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
            <p>API Documentation v2.0.0</p>
        </div>
    </div>

    <script>
        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStats() {
            try {
                const response = await fetch('/api/v2/public/stats');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('users-count').textContent = data.data.users;
                    document.getElementById('bonuses-count').textContent = data.data.totalBonuses;
                    document.getElementById('promos-count').textContent = data.data.activePromotions;
                    document.getElementById('stores-count').textContent = data.data.stores;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É
        async function testEndpoint(url, method, resultId) {
            const resultDiv = document.getElementById(resultId);
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="loading">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>';

            try {
                const response = await fetch(url, { method });
                const data = await response.json();
                resultDiv.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (error) {
                resultDiv.innerHTML = `<pre style="color: red;">Error: ${error.message}</pre>`;
            }
        }

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        loadStats();
    </script>
</body>
</html>
